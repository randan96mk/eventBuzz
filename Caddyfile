{
    # Development: disable HTTPS auto
    auto_https off
}

:80 {
    # API routes
    handle /api/* {
        reverse_proxy api:8000
    }

    # Auth routes
    handle /auth/* {
        reverse_proxy keycloak:8080
    }

    # Storage (public read)
    handle /storage/* {
        reverse_proxy minio:9000
    }

    # Health check
    handle /health {
        reverse_proxy api:8000
    }

    respond "EventBuzz API Gateway" 200
}
